<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>브랜드 리스트</title>
  <style>
    /* iframe은 화면에 보이지 않게 숨깁니다. */
    .prefetch-frame {
      display: none;
    }
  </style>
</head>
<body>
  <h1>브랜드 리스트</h1>
  <div class="brand-container" id="brandContainer">
    <!-- 브랜드 카드들이 동적으로 생성됩니다 -->
  </div>
  <div id="prefetchContainer"></div>
  <script>
    const version = new Date().getTime();
    const fetchUrl = `https://storage.googleapis.com/master_piece_tag_datas/parsing_rules2.json?v=${version}`;

    fetch(fetchUrl)
      .then(response => response.json())
      .then((data) => {
        const container = document.getElementById('brandContainer');
        const prefetchContainer = document.getElementById('prefetchContainer');
        for (const url in data) {
          if (data.hasOwnProperty(url)) {
            const brandInfo = data[url];
            const brand = brandInfo.brand;
            
            // 브랜드 카드 생성
            const card = document.createElement('div');
            card.classList.add('brand-card');
            
            const nameEl = document.createElement('div');
            nameEl.classList.add('brand-name');
            nameEl.textContent = brand;
            card.appendChild(nameEl);
            
            const btn = document.createElement('button');
            btn.classList.add('visit-btn');
            btn.textContent = "사이트 방문";
            btn.addEventListener('click', () => {
              window.open(url, '_blank');
            });
            card.appendChild(btn);
            
            container.appendChild(card);

            // 페이지 로드시 미리 URL을 불러오기 위한 숨겨진 iframe 생성
            const iframe = document.createElement('iframe');
            iframe.classList.add('prefetch-frame');
            iframe.src = url;
            prefetchContainer.appendChild(iframe);
          }
        }
      })
      .catch(error => {
        console.error('브랜드 데이터를 불러오지 못했습니다:', error);
      });
  </script>
</body>
</html>
